2024-11-02 15:15:57,781 ERROR: Error in oauth2callback: (invalid_grant) Bad Request [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:473]
2024-11-02 15:15:57,787 ERROR: Exception traceback:  [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:474]
Traceback (most recent call last):
  File "/Users/chrisbeaumont/Projects/YouTubeReports/app.py", line 443, in oauth2callback
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/google_auth_oauthlib/flow.py", line 285, in fetch_token
    return self.oauth2session.fetch_token(self.client_config["token_uri"], **kwargs)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/requests_oauthlib/oauth2_session.py", line 406, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 427, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 441, in parse_token_response
    validate_token_parameters(params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 448, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 399, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidGrantError: (invalid_grant) Bad Request
2024-11-02 15:16:04,122 INFO: Lumina startup [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:58]
2024-11-02 15:16:06,608 INFO: Initiating YouTube OAuth flow for user 1 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:401]
2024-11-02 15:16:06,608 INFO: Redirect URI: http://localhost:5000/auth/youtube/callback [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:402]
2024-11-02 15:16:06,609 INFO: State parameter: DOfWHyce2Swosksbsvcve9Htkfhywr [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:403]
2024-11-02 15:16:13,242 INFO: Starting OAuth callback processing [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:420]
2024-11-02 15:16:13,522 INFO: OAuth callback successful. Session ID: e5eba280-8afa-46e9-80a6-a48b5c5a33c9 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:448]
2024-11-02 15:16:13,523 INFO: Credentials stored in session: True [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:449]
2024-11-02 15:16:13,538 INFO: Template rendered, returning response [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:457]
2024-11-02 15:16:14,840 INFO: Starting analysis stream for session e5eba280-8afa-46e9-80a6-a48b5c5a33c9 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:300]
2024-11-02 15:16:14,841 INFO: Found credentials in session, starting analysis [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:310]
2024-11-02 15:16:14,842 ERROR: Error in stream_analysis: name 'get_watch_history' is not defined [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:364]
2024-11-02 15:18:40,503 INFO: Lumina startup [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:58]
2024-11-02 15:18:42,956 INFO: Starting OAuth callback processing [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:420]
2024-11-02 15:18:43,142 ERROR: Error in oauth2callback: (invalid_grant) Bad Request [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:461]
2024-11-02 15:18:43,148 ERROR: Exception traceback:  [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:462]
Traceback (most recent call last):
  File "/Users/chrisbeaumont/Projects/YouTubeReports/app.py", line 431, in oauth2callback
    flow.fetch_token(authorization_response=authorization_response)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/google_auth_oauthlib/flow.py", line 285, in fetch_token
    return self.oauth2session.fetch_token(self.client_config["token_uri"], **kwargs)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/requests_oauthlib/oauth2_session.py", line 406, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 427, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 441, in parse_token_response
    validate_token_parameters(params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 448, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 399, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidGrantError: (invalid_grant) Bad Request
2024-11-02 15:18:45,005 INFO: Initiating YouTube OAuth flow for user 1 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:401]
2024-11-02 15:18:45,006 INFO: Redirect URI: http://localhost:5000/auth/youtube/callback [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:402]
2024-11-02 15:18:45,006 INFO: State parameter: E84GjQaPztWvjS1jFJnz9jYFalwc3M [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:403]
2024-11-02 15:18:51,489 INFO: Starting OAuth callback processing [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:420]
2024-11-02 15:18:51,752 INFO: OAuth callback successful. Session ID: ac19f86c-adc9-460c-a29b-ede33019f426 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:448]
2024-11-02 15:18:51,753 INFO: Credentials stored in session: True [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:449]
2024-11-02 15:18:51,760 INFO: Template rendered, returning response [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:457]
2024-11-02 15:18:53,047 INFO: Starting analysis stream for session ac19f86c-adc9-460c-a29b-ede33019f426 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:300]
2024-11-02 15:18:53,047 INFO: Found credentials in session, starting analysis [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:310]
2024-11-02 15:18:53,048 ERROR: Error in stream_analysis: name 'get_watch_history' is not defined [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:364]
2024-11-02 15:20:13,283 INFO: Lumina startup [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:58]
2024-11-02 15:20:15,709 INFO: Starting OAuth callback processing [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:420]
2024-11-02 15:20:15,916 ERROR: Error in oauth2callback: (invalid_grant) Bad Request [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:461]
2024-11-02 15:20:15,916 ERROR: Exception traceback:  [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:462]
Traceback (most recent call last):
  File "/Users/chrisbeaumont/Projects/YouTubeReports/app.py", line 431, in oauth2callback
    flow.fetch_token(authorization_response=authorization_response)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/google_auth_oauthlib/flow.py", line 285, in fetch_token
    return self.oauth2session.fetch_token(self.client_config["token_uri"], **kwargs)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/requests_oauthlib/oauth2_session.py", line 406, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 427, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 441, in parse_token_response
    validate_token_parameters(params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 448, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/Users/chrisbeaumont/Projects/lumina/lib/python3.9/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 399, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidGrantError: (invalid_grant) Bad Request
2024-11-02 15:20:16,811 INFO: Initiating YouTube OAuth flow for user 1 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:401]
2024-11-02 15:20:16,811 INFO: Redirect URI: http://localhost:5000/auth/youtube/callback [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:402]
2024-11-02 15:20:16,811 INFO: State parameter: Z0pL70iBfpCZIaAVVi7My4bG5PfsDC [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:403]
2024-11-02 15:20:22,298 INFO: Starting OAuth callback processing [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:420]
2024-11-02 15:20:22,569 INFO: OAuth callback successful. Session ID: 5c493934-9961-463a-9f36-d99870d9eaa4 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:448]
2024-11-02 15:20:22,569 INFO: Credentials stored in session: True [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:449]
2024-11-02 15:20:22,579 INFO: Template rendered, returning response [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:457]
2024-11-02 15:20:23,848 INFO: Starting analysis stream for session 5c493934-9961-463a-9f36-d99870d9eaa4 [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:300]
2024-11-02 15:20:23,848 INFO: Found credentials in session, starting analysis [in /Users/chrisbeaumont/Projects/YouTubeReports/app.py:310]
2024-11-02 15:20:23,863 INFO: Initialized YouTube API client [in /Users/chrisbeaumont/Projects/YouTubeReports/youtube_utils.py:92]
2024-11-02 15:20:24,277 INFO: Retrieved 50 videos [in /Users/chrisbeaumont/Projects/YouTubeReports/youtube_utils.py:105]
2024-11-02 15:20:24,538 INFO: Retrieved 49 videos [in /Users/chrisbeaumont/Projects/YouTubeReports/youtube_utils.py:105]
